<!--Copyright (c) 2025 Ydemae
    Licensed under the AGPLv3 License. See LICENSE file for details.-->

<div class="login-container">
    <div class="alert alert-dismissible alert-danger" *ngIf="this.errorIsShown" role="alert">
        <button type="button" class="btn-close" data-bs-dismiss="alert" (click)="hideError()" aria-label="Close error message"></button>
        <h4 class="alert-heading">{{ this.errTitle }}</h4>
        <p class="mb-0">{{ this.errMessage }}</p>
    </div>

    <div class="alert alert-dismissible alert-secondary" *ngIf="this.flashMessage != null" role="alert">
        <button type="button" class="btn-close" data-bs-dismiss="alert" (click)="hideFlashMessage()" aria-label="Close message"></button>
        <p class="mb-0">{{ this.flashMessage }}</p>
    </div>

    <div class="content-wrapper">
        <div class="login-card">
            <div class="login-header">
                <h1 class="login-title">Welcome Back</h1>
                <p class="login-subtitle">Sign in to your account to continue</p>
            </div>

            <form class="login-form" (ngSubmit)="onSubmit()" #loginForm="ngForm">
                <div class="form-group">
                    <label for="login" class="form-label">Username</label>
                    <div class="input-group">
                        <span class="input-group-text">
                            <i class="fas fa-user"></i>
                        </span>
                        <input type="text" 
                        class="form-control" 
                        autocomplete="username" 
                        id="login" 
                        name="login" 
                        [(ngModel)]="username" 
                        placeholder="Enter your username"
                        required>

                    </div>
                    <div class="text-danger" *ngIf="this.error.username">
                        {{ this.error.username }}
                    </div>
                </div>

                <div class="form-group">
                    <app-password [password]="this.password" 
                    (passwordChangeEvent)="onPasswordChange($event)" 
                    [error]="this.error.password">
                    </app-password>
                </div>

                <div class="form-group">
                    <button type="submit" 
                    class="btn btn-primary w-100" 
                    [disabled]="loginForm.invalid">
    
                        Sign In
                        <i class="fas fa-sign-in-alt mx-1"></i>

                    </button>
                </div>

                <div class="text-center" *ngIf="this.error.global != ''">
                    <p class="text-danger">{{ this.error.global }}</p>
                </div>
            </form>
        </div>
    </div>
</div>